{
  "schema_version": "frankenjax.perf-delta.v1",
  "packet_id": "FJ-P2C-005",
  "subsystem": "cache_keying",
  "generated_at": "2026-02-20T11:45:00Z",
  "benchmark_tool": "criterion 0.8",
  "optimization_description": "Zero-allocation streaming hasher: eliminate String::new() + write!() in hash_canonical_payload_ref by hashing mode/backend components directly into SHA-256 state. Also inlined hash_canonical_payload_ref.",
  "deltas": [
    {
      "benchmark": "cache_key/owned/empty_program",
      "before_ns": 316,
      "after_ns": 312,
      "delta_pct": -1.3,
      "status": "unchanged"
    },
    {
      "benchmark": "cache_key/owned/10eqn_program",
      "before_ns": 401,
      "after_ns": 410,
      "delta_pct": 2.2,
      "status": "unchanged"
    },
    {
      "benchmark": "cache_key/streaming/10eqn_program",
      "before_ns": 347,
      "after_ns": 234,
      "delta_pct": -32.6,
      "status": "improved"
    },
    {
      "benchmark": "cache_lookup/hit/in_memory",
      "before_ns": 306,
      "after_ns": 305,
      "delta_pct": -0.3,
      "status": "unchanged"
    },
    {
      "benchmark": "cache_lookup/miss/in_memory",
      "before_ns": 53,
      "after_ns": 52,
      "delta_pct": -1.9,
      "status": "unchanged"
    },
    {
      "benchmark": "compatibility_matrix_row",
      "before_ns": 71,
      "after_ns": 63,
      "delta_pct": -11.3,
      "status": "improved"
    }
  ],
  "summary": {
    "total_benchmarks": 6,
    "improved": 2,
    "regressed": 0,
    "unchanged": 4,
    "primary_improvement": "streaming hasher 32.6% faster (347→234 ns)"
  },
  "targets_met": {
    "cache_key_under_1us": true,
    "cache_hit_under_200ns_note": "miss at 52ns; hit at 305ns includes clone+sha256 check",
    "cache_miss_under_200ns": true
  },
  "isomorphism_evidence": {
    "streaming_owned_parity": "streaming_hash_matches_owned_hash test passes — identical keys",
    "all_tests_pass": "36/36 fj-cache tests, 15/15 conformance tests, 6/6 E2E tests"
  }
}
