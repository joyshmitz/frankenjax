{
  "schema_version": "frankenjax.e2e.log.v1",
  "scenario_id": "e2e_p2c003_staging_residual_graph",
  "test_id": "e2e_p2c003::e2e_p2c003_staging_residual_graph",
  "packet_id": "P2C-003",
  "fixture_id": "e19945192c1c0af849ad265245ea6e94a1288fbdc245f0776274ca6165496fbd",
  "seed": null,
  "mode": "strict",
  "ts_utc_unix_ms": 1771593127285,
  "env": {
    "arch": "x86_64",
    "os": "linux",
    "rust_toolchain": "nightly-x86_64-unknown-linux-gnu"
  },
  "artifact_refs": [],
  "replay_command": "cargo test -p fj-conformance --test e2e_p2c003 -- e2e_p2c003_staging_residual_graph --exact --nocapture",
  "input_capture": {
    "description": "trace -> partial_eval -> verify residual contains only dynamic ops",
    "programs": [
      "Add2",
      "Square",
      "SinX",
      "SquarePlusLinear"
    ]
  },
  "intermediate_states": [
    {
      "equation_conservation": true,
      "known_eqns": 0,
      "known_primitives": [],
      "residual_count": 1,
      "residual_primitives": [
        "add"
      ],
      "step": "pe_result_Add2",
      "total_eqns": 1,
      "unknown_eqns": 1
    },
    {
      "equation_conservation": true,
      "known_eqns": 0,
      "known_primitives": [],
      "residual_count": 0,
      "residual_primitives": [
        "mul"
      ],
      "step": "pe_result_Square",
      "total_eqns": 1,
      "unknown_eqns": 1
    },
    {
      "equation_conservation": true,
      "known_eqns": 1,
      "known_primitives": [
        "sin"
      ],
      "residual_count": 0,
      "residual_primitives": [],
      "step": "pe_result_SinX",
      "total_eqns": 1,
      "unknown_eqns": 0
    },
    {
      "graph": {
        "known_equations": [
          {
            "inputs": [
              "Var(VarId(1))"
            ],
            "outputs": [
              3
            ],
            "primitive": "neg"
          }
        ],
        "known_invars": [
          1
        ],
        "known_outvars": [
          3
        ],
        "residual_avals": 1,
        "unknown_equations": [
          {
            "inputs": [
              "Var(VarId(3))",
              "Var(VarId(2))"
            ],
            "outputs": [
              4
            ],
            "primitive": "mul"
          }
        ],
        "unknown_invars": [
          3,
          2
        ],
        "unknown_outvars": [
          4
        ]
      },
      "step": "residual_graph_detail"
    },
    {
      "equations_preserved": true,
      "original_eqns": 1,
      "post_dce_eqns": 1,
      "step": "dce_residual"
    }
  ],
  "output_capture": {
    "dce_preserves_residual": true,
    "neg_mul_known_has_neg": true,
    "neg_mul_unknown_has_mul": true,
    "programs_tested": 3
  },
  "result": "pass",
  "duration_ms": 0,
  "details": null
}